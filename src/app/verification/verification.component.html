<div class="form-container p-5">
  <!-- Titre centré avec icône -->
  <h2 class="form-title text-center mb-6">
    <i class="pi pi-search mr-2"></i>Vérification de client
  </h2>

  <!-- Formulaire style "Connect With Us" -->
  <form class="form-grid">
    <!-- Ligne 1 - Nom et Prénom -->
    <div class="form-group">
      <label class="form-label">Nom <span class="required">*</span></label>
      <span class="p-input-icon-left w-full">
        <i class="pi pi-user"></i>
        <input pInputText [(ngModel)]="client.nom" name="nom" placeholder="Ex: Dupont" class="form-input" />
      </span>
    </div>

    <div class="form-group">
      <label class="form-label">Prénom <span class="required">*</span></label>
      <span class="p-input-icon-left w-full">
        <i class="pi pi-user-plus"></i>
        <input pInputText [(ngModel)]="client.prenom" name="prenom" placeholder="Ex: Marie" class="form-input" />
      </span>
    </div>

    <!-- Ligne 2 - Date de naissance et Nationalité -->
    <div class="form-group">
      <label class="form-label">Date de naissance</label>
      <span class="p-input-icon-left w-full">
        <i class="pi pi-calendar"></i>
        <input type="date" pInputText [(ngModel)]="client.date_naissance" name="date_naissance" class="form-input" />
      </span>
    </div>

    <div class="form-group">
      <label class="form-label">Nationalité</label>
      <span class="p-input-icon-left w-full">
        <i class="pi pi-flag"></i>
        <input pInputText [(ngModel)]="client.nationalite" name="nationalite" class="form-input" />
      </span>
    </div>

    <!-- Ligne 3 - Résidence -->
    <div class="form-group">
      <label class="form-label">Résidence</label>
      <span class="p-input-icon-left w-full">
        <i class="pi pi-home"></i>
        <input pInputText [(ngModel)]="client.residence" name="residence" class="form-input" />
      </span>
    </div>

    <!-- Bouton de soumission -->
    <div class="form-actions">
      <button pButton type="button" label="Vérifier" icon="pi pi-check"
              class="submit-button" (click)="verifier()"></button>
    </div>
<!-- ...autres éléments du composant... -->

  
    <!-- TEMPORAIRE POUR DEBUG -->
    <div class="mt-4" *ngIf="resultats.length === 0 && !erreur && !isLoading">
      <p class="text-gray-500">Aucun résultat retourné pour cette recherche.</p>
    </div>

  </form>

<!-- Chargement circulaire -->
<div *ngIf="isLoading" class="loading-container text-center mt-5">
  <p-progressSpinner styleClass="custom-spinner" strokeWidth="6" animationDuration=".7s"></p-progressSpinner>
  <p class="mt-2 text-gray-500">Vérification en cours...</p>
  <p class="text-sm text-primary font-bold mt-1">{{ progress | number:'1.0-0' }}%</p>
</div>


<!-- Résultats - Tableau style minimaliste -->
<div class="table-container mt-6" *ngIf="resultats.length > 0">
  <table class="data-table">
    <thead>
      <tr>
        <th>Nom</th>
        <th>Prénom</th>
        <th>Score</th>
        <th>Niveau</th>
        <th>Alerte</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let res of resultats" [ngClass]="{
          'bg-red-100': res.niveau === 'Très fort',
          'bg-orange-100': res.niveau === 'Fort',
          'bg-yellow-100': res.niveau === 'Modéré',
          'bg-green-100': res.niveau === 'Faible'
        }">
        <td>{{ res.nom }}</td>
        <td>{{ res.prenom }}</td>
        <td><strong>{{ res.score }}%</strong></td>
        <td>{{ res.niveau }}</td>
        <td>
          <span class="alert-tag" [class.alert]="res.alerte">
            {{ res.alerte ? '⚠️ Oui' : 'Non' }}
          </span>
        </td>
      </tr>
    </tbody>
  </table>
</div>